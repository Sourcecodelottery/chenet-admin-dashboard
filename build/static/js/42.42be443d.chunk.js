(this["webpackJsonpadmin-template"]=this["webpackJsonpadmin-template"]||[]).push([[42],{542:function(t,e,n){"use strict";var a=n(516),c=n(557),r=n(137),i=n(535),o=n(9),s=n(1),l=Object(o.a)(a.a)((function(t){var e=t.theme;return"\n        border-radius: 0;\n        margin: ".concat(e.spacing(3)," 0;\n")}));e.a=function(){return Object(s.jsx)(l,{children:Object(s.jsx)(c.a,{maxWidth:"lg",children:Object(s.jsxs)(a.a,{py:3,display:{xs:"block",md:"flex"},alignItems:"center",textAlign:{xs:"center",md:"left"},justifyContent:"space-between",children:[Object(s.jsx)(a.a,{children:Object(s.jsx)(r.a,{variant:"subtitle1",children:"\xa9 2021 - Tokyo Free White React Admin Dashboard"})}),Object(s.jsxs)(r.a,{sx:{pt:{xs:2,md:0}},variant:"subtitle1",children:["Crafted by ",Object(s.jsx)(i.a,{href:"https://bloomui.com",target:"_blank",rel:"noopener noreferrer",children:"BloomUI.com"})]})]})})})}},560:function(t,e,n){"use strict";var a=n(24);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=a(n(25)),r=n(1),i=(0,c.default)([(0,r.jsx)("path",{d:"M9.83 8H11v6h2V8h1.17L12 5.83z",opacity:".3"},"0"),(0,r.jsx)("path",{d:"m12 3-7 7h4v6h6v-6h4l-7-7zm1 5v6h-2V8H9.83L12 5.83 14.17 8H13zM5 18h14v2H5z"},"1")],"UploadTwoTone");e.default=i},602:function(t,e){t.exports="object"==typeof self?self.FormData:window.FormData},615:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return u}));var a=n(22),c=n.n(a),r=n(23),i=function(t){return{query:'mutation {\n    createNotification(input: {\n      content: {\n        title: "'.concat(t.content.title,'"\n        description: "').concat(t.content.description,'"\n        images: [').concat(t.content.images.map((function(t){return'"'.concat(t,'"')})),"]\n      }\n      targeted_users: [").concat(t.targeted_users.map((function(t){return'"'.concat(t,'"')})),"]\n    }) {\n      ...on ValidationError {\n        error_path\n      }\n      ...on INotificationSimple {\n        _id\n        content { title description }\n        targeted_users\n        images\n      }\n    }\n  }")}},o=function(t){var e=t._id;return{query:'mutation {\n    removeNotificationByID(_id: "'.concat(e,'") {\n      __typename\n      ... on INotificationSimple{\n      _id content {title description images} targeted_users sender createdAt updatedAt   \n       }\n      ... on ValidationError {\n        error_path errors {\n          error_code error_message\n        }\n      }\n    }\n  }')}},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,e){return null};c.a.post(r.a.baseURL,i(t)).then((function(t){e(null,t.data.data.createNotification)})).catch((function(t){return console.log("Error",t)}))},l=function(t){var e=t._id,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,e){return null};c.a.post(r.a.baseURL,o({_id:e})).then((function(t){n(null,t.data.data.removeNotificationByID)})).catch((function(t){return console.log("Error",t)}))},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t,e,n){return null};c.a.post(r.a.baseURL,{query:"{\n    fetchNotificationsDoc{\n      _id content {title description images} targeted_users sender{first_name last_name _id phone_number email role is_active} createdAt updatedAt   \n    }\n  }"}).then((function(e){console.log(e.data.data),t(null,e.data.data.fetchNotificationsDoc,e)})).catch((function(t){return console.log("Error",t)}))}},616:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(22),c=n.n(a),r=n(23),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t,e){return null};c.a.post(r.a.baseURL,{query:"{\n    fetchUsers {\n        _id\n        first_name\n        middle_name\n        last_name\n        gender\n        role\n        phone_number\n        email\n        service_id\n        phone_number\n    }\n}"}).then((function(e){console.log("data",e.data.data.fetchUsers),t(null,e.data.data.fetchUsers)})).catch((function(t){return console.log("Error",t)}))}},750:function(t,e,n){"use strict";n.r(e),n.d(e,"CreateNotification",(function(){return R}));var a=n(6),c=n(159),r=n.n(c),i=n(206),o=n(17),s=n(568),l=n(516),u=n(26),d=n(524),j=n(801),b=n(591),f=n(704),h=n(517),p=n(537),O=n(557),m=n(577),g=n(9),x=n(0),v=n(566),_=n(615),y=n(195),S=n(542),w=n(21),C=n(616),E=n(527),I=n(632),N=n(621),T=n(560),A=n.n(T),M=n(20),U=n(602),L=n.n(U),k=n(22),q=n.n(k),D=n(23),F=n(1);function R(t){var e=Object(w.h)(),n=Object(x.useState)([]),c=Object(o.a)(n,2),T=c[0],U=c[1],k=Object(x.useState)(!1),R=Object(o.a)(k,2),z=(R[0],R[1],Object(x.useState)(!1)),H=Object(o.a)(z,2),V=H[0],B=H[1],W=Object(x.useState)(null),J=Object(o.a)(W,2),P=J[0],G=J[1],K=Object(x.useState)([]),Q=Object(o.a)(K,2),X=Q[0],Y=Q[1],Z=Object(x.useState)([]),$=Object(o.a)(Z,2),tt=$[0],et=($[1],Object(x.useState)([])),nt=Object(o.a)(et,2),at=nt[0],ct=nt[1],rt=Object(x.useState)(null),it=Object(o.a)(rt,2),ot=it[0],st=(it[1],Object(x.useState)(null)),lt=Object(o.a)(st,2),ut=lt[0],dt=(lt[1],Object(x.useState)(null)),jt=Object(o.a)(dt,2),bt=(jt[0],jt[1],Object(x.useState)(!1)),ft=Object(o.a)(bt,2),ht=ft[0];ft[1];Object(x.useEffect)((function(){Object(C.a)((function(t,e){U(e)}))}),[]);var pt=Object(x.useState)(!1),Ot=Object(o.a)(pt,2),mt=Ot[0],gt=(Ot[1],Object(x.useState)([])),xt=Object(o.a)(gt,2),vt=xt[0],_t=xt[1],yt=Object(x.useState)(null),St=Object(o.a)(yt,2),wt=St[0],Ct=St[1];Object(x.useEffect)((function(){var t=Et,e=!1;ht&&(t=[],e=!0),mt&&(_t(t),e=!0),"male"===wt?(t=t.filter((function(t){return"MALE"===t.gender})),e=!0):"female"===wt&&(t=t.filter((function(t){return"FEMALE"===t.gender})),e=!0),e&&_t(t)}),[wt,mt,ht]);var Et=T.map((function(t){return{value:t._id,label:t.first_name+" "+t.last_name,gender:null!==t.gender?t.gender:null}})),It=Object(N.a)(),Nt=function(){var t=Object(i.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:B(!0);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Tt=Object(g.a)("input")({display:"none"}),At=(Object(g.a)(s.a)((function(t){var e=t.theme;return"\n    position: relative;\n\n    .MuiCardMedia-root {\n      height: ".concat(e.spacing(26),";\n    }\n")})),Object(g.a)(l.a)((function(t){var e=t.theme;return"\n    position: absolute;\n    right: ".concat(e.spacing(2),";\n    bottom: ").concat(e.spacing(2),";\n")})),Object(v.a)()),Mt=At.register,Ut=At.handleSubmit,Lt=At.formState.errors;Object(u.a)();return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(y.a,{children:Object(F.jsx)("title",{children:"Ethio Lottery"})}),Object(F.jsx)(O.a,{maxWidth:"lg",children:Object(F.jsx)(m.a,{sx:{mx:"auto"},container:!0,direction:"row",justifyContent:"center",alignItems:"stretch",spacing:3,children:Object(F.jsx)(m.a,{item:!0,xs:12,children:Object(F.jsxs)("form",{onSubmit:Ut(Nt),children:[Object(F.jsx)("h1",{children:"Create Notification"}),Object(F.jsx)(d.a,Object(a.a)(Object(a.a)({sx:{width:"60%",mt:4},error:!!(void 0!==Lt.content&&Lt.content.title||ot)},Mt("content.title",{required:!0})),{},{type:"text",label:"title",variant:"outlined",value:null!==P&&void 0!==P?P:"",onChange:function(t){G(t.target.value)},helperText:void 0!==Lt.content&&Lt.content.title?Object(F.jsx)("span",{children:"This field is required"}):ot||null})),Object(F.jsx)(d.a,Object(a.a)(Object(a.a)({sx:{width:"60%",mt:4},error:!!(void 0!==Lt.content&&Lt.content.description||ut)},Mt("content.description",{required:!0})),{},{label:"description",onChange:function(t){Y(X)},helperText:void 0!==Lt.content&&Lt.content.description?Object(F.jsx)("span",{children:"This field is required"}):ut||null,variant:"outlined",type:"text",multiline:!0,rows:4})),Object(F.jsx)(E.a,{sx:{width:"60%",mt:4},children:Object(F.jsx)(I.a,{closeMenuOnSelect:!1,value:vt,components:It,options:Et,isMulti:!0,onChange:function(t){_t(t)}})}),Object(F.jsx)("br",{}),Object(F.jsx)(E.a,{component:"fieldset",children:Object(F.jsxs)(j.a,{row:!0,"aria-label":"gender",value:null!==wt&&void 0!==wt?wt:"",name:"row-radio-buttons-group",onChange:function(t){Ct(t.target.value)},children:[Object(F.jsx)(b.a,{value:"female",control:Object(F.jsx)(f.a,{}),label:"Female"}),Object(F.jsx)(b.a,{value:"male",control:Object(F.jsx)(f.a,{}),label:"Male"})]})}),Object(F.jsxs)(l.a,{sx:{display:"block",marginTop:4},children:[Object(F.jsx)(Tt,{onChange:function(t){var e=t.currentTarget.files;ct(e)},accept:"image/*",id:"change-cover",multiple:!0,type:"file"}),Object(F.jsx)("label",{htmlFor:"change-cover",children:Object(F.jsx)(h.a,{startIcon:Object(F.jsx)(A.a,{}),variant:"contained",component:"span",children:"Images"})})]}),Object(F.jsx)(l.a,{sx:{display:"block"},children:Object(F.jsx)(h.a,{sx:{mt:4,px:5},variant:"contained",color:"primary",type:"button",onClick:function(){return function(){for(var t=new L.a,n=0;n<at.length;n++){var a=at[n];t.append("notification:".concat(n),a)}var c={url:D.a.uploadURL,method:"POST",headers:{Accept:"*/*"},data:t};q.a.request(c).then((function(t){t.data.uri.length===at.length&&Object(_.b)({content:{description:String(X),images:t.data.uri,title:P},targeted_users:tt},(function(t,n){n._id?(B(!1),e(M.a.ADMIN.NOTIFICATION.ROUTE,{replace:!0})):B(!1)}))}))}()},children:V?Object(F.jsx)(p.a,{style:{color:"white"}}):"Create"})})]})})})}),Object(F.jsx)(S.a,{})]})}e.default=R}}]);
//# sourceMappingURL=42.42be443d.chunk.js.map